<span class="breadcrumb">
	<a (click)="onItemSelected('dashboard')">{{'dashboard.home' | translate}} &nbsp;&nbsp;</a> > &nbsp;&nbsp;<a (click)="onItemSelected('uinservices/dashboard')">{{'dashboard.uinservices' | translate}} &nbsp;&nbsp;</a> > &nbsp;&nbsp;<span class="active">{{'managemyvid.title' | translate}}</span>
</span>

<div class="main-div" *ngIf="langJSON">
	<mat-card>
        <h3 style="color: #505050;">{{'managemyvid.title' | translate}}</h3>
        <p class="intro-description">{{'managemyvid.introDescription' | translate}}</p>
		<table *ngIf="policyType" style="width:100%">
			<tr *ngFor = "let policy of policyType.vidPolicies;">
				<td style="width:100%">	
					<div style="margin-bottom: .8rem; margin-top: .3rem;">				 
				    <span class="title-card">{{policy.vidType}} 
						<mat-icon  (mouseover)="openPopupMsg(policy.vidType)" (mouseout)="openPopupMsg()" style="color: green;font-size: 18px; cursor: pointer;" matTooltip="">info</mat-icon>
						<div *ngIf="showInfoCard && (iIconVidType===policy.vidType)" class="info-box">
							<p style="margin-top: 0px;">{{infoText}}</p>
						</div>
						<button [id]="policy.vidType" mat-raised-button color="primary" (click)="generateVIDBtn(policy.vidType)">{{'managemyvid.create' | translate}}</button></span>
				</div>
				    <mat-grid-list   style="width:100%;" gutterSize="10px" [cols]="cols"  [rowHeight]="rowHeight" (window:resize)="onResize($event)" *ngIf=finalTypeList[policy.vidType] class="each-vid-card">
						<mat-grid-tile *ngFor = "let list of finalTypeList[policy.vidType]; let i = index">
							<mat-card [id]="list.vid" class="mini-card">
							  <table style="width:100%">
							  <tr>
							    <td colspan="2" class="label">{{'managemyvid.vid' | translate}}</td>
							  </tr>
							  <tr>
							    <td colspan="2" class="mat-card-header-text">
							    	<span *ngIf=list.showvid>{{list.vid}}&nbsp;&nbsp;&nbsp;<span style="cursor:pointer;" (click)="displayVid(finalTypeList, policy.vidType, list, false)"><img src="assets\eye_slash.png" style="color: green;width: 18px;"></span></span>
							    	<span *ngIf=!list.showvid>{{list.maskedVid}}<mat-icon style="color: green;font-size: 18px;padding-left: 20px;cursor:pointer;" (click)="displayVid(finalTypeList, policy.vidType, list, true)">remove_red_eye</mat-icon></span>
							    </td>
							  </tr>
							  <tr>
							    <td style="width:50%" class="label">{{'managemyvid.generatedOn' | translate}}</td>
							    <td style="width:50%" class="label">{{'managemyvid.expiry' | translate}}</td>
							  </tr>
							  <tr>
							    <td style="width:50%">
							    	{{list.genratedOnTimestamp | date:'dd:MM:yyyy hh:mm'}}&nbsp;{{ list.genratedOnTimestamp | date : 'a' | lowercase }}
							    </td>
							    <td style="width:50%" *ngIf="list.expiryTimestamp">
							    	{{list.expiryTimestamp | date:'dd:MM:yyyy hh:mm'}}&nbsp;{{ list.expiryTimestamp | date : 'a' | lowercase }}
							    </td>
								<td style="width:50%" *ngIf="!list.expiryTimestamp">
							    	NA
							    </td>
							  </tr>
							  <tr>
							    <td style="width:50%" class="label">{{'managemyvid.transactionLeft' | translate}}</td>
							    <td style="width:50%" class="label"></td>
							  </tr>
							  <tr>
							    <td style="width:50%">
							    	<span *ngIf="list.transactionsLeftCount">{{list.transactionsLeftCount}}</span>
							    	<span *ngIf="!list.transactionsLeftCount">NA</span>							    	
							    </td>
							    <td style="width:50%;float: right;">
							    	<span (click)="downloadVIDBtn(list.vid,policy.vidType)" style="color: green;font-size: 24px;cursor:pointer;"><img id="download{{i}}" src="assets\download.png"></span>&nbsp;&nbsp;&nbsp;
							    	<mat-icon id="delete{{i}}" style="color: #DB4F4F;font-size: 24px;cursor:pointer;" (click)="revokeVIDBtn(list.vid,policy.vidType)">delete</mat-icon>
							    </td>
							  </tr>
							  </table>
							</mat-card>
						</mat-grid-tile>		  
					</mat-grid-list>		   	
				</td>
			</tr>
		</table>
	</mat-card>	
</div>


